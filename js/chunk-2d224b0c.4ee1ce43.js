(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d224b0c"],{e0e0:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app-edit"}},[a("AppEditWrapper",{attrs:{header:"Редактор сотрудника: "+e.editedEmployee.surname+" "+e.editedEmployee.name},scopedSlots:e._u([{key:"nav-buttons",fn:function(){return[a("AppButtonIcon",{attrs:{icon:"save",title:"Сохранить и выйти"},on:{"button-click":function(t){return e.saveEditedEmployee(e.editedEmployee)}}}),a("AppButtonIcon",{attrs:{icon:"location_city",title:"Вернуться к городам"},on:{"button-click":e.editorExit}})]},proxy:!0},{key:"edit-section",fn:function(){return[a("div",{staticClass:"edit-block"},[a("AppHeaderIcon",{staticClass:"edit-block-header",attrs:{"header-level":"4","material-icon":"assignment_ind","header-text":"Авторизация"}}),a("div",{staticClass:"edit-block-content"},[a("AppLineText",{attrs:{inputID:"input-email",label:"Почта: ",maxLength:"20"},model:{value:e.editedEmployee.email,callback:function(t){e.$set(e.editedEmployee,"email",t)},expression:"editedEmployee.email"}}),a("AppLineText",{attrs:{inputID:"input-password",label:"Пароль: ",maxLength:"20"},model:{value:e.editedEmployee.password,callback:function(t){e.$set(e.editedEmployee,"password",t)},expression:"editedEmployee.password"}}),a("AppSelect",{attrs:{selectID:"select",label:"Доступ: "},model:{value:e.editedEmployee.access,callback:function(t){e.$set(e.editedEmployee,"access",t)},expression:"editedEmployee.access"}},[a("option",{attrs:{value:"employee"}},[e._v("Сотрудник")]),a("option",{attrs:{value:"admin"}},[e._v("Админ")]),a("option",{attrs:{value:"staffManager"}},[e._v("Менеджер по персоналу")]),a("option",{attrs:{value:"customerManager"}},[e._v("Менеджер по работе с заказчиками")]),a("option",{attrs:{value:"leader"}},[e._v("Руководитель обособленного подразделения")])]),a("AppLineText",{attrs:{inputID:"input-duty",label:"Должность: ",maxLength:"20"},model:{value:e.editedEmployee.duty,callback:function(t){e.$set(e.editedEmployee,"duty",t)},expression:"editedEmployee.duty"}})],1)],1),a("div",{staticClass:"edit-block"},[a("AppHeaderIcon",{staticClass:"edit-block-header",attrs:{"header-level":"4","material-icon":"account_box","header-text":"ФИО"}}),a("div",{staticClass:"edit-block-content"},[a("AppLineText",{attrs:{inputID:"input-surname",label:"Фамилия: ",maxLength:"20"},model:{value:e.editedEmployee.surname,callback:function(t){e.$set(e.editedEmployee,"surname",t)},expression:"editedEmployee.surname"}}),a("AppLineText",{attrs:{inputID:"input-name",label:"Имя: ",maxLength:"20"},model:{value:e.editedEmployee.name,callback:function(t){e.$set(e.editedEmployee,"name",t)},expression:"editedEmployee.name"}}),a("AppLineText",{attrs:{inputID:"input-patronymic",label:"Отчество: ",maxLength:"20"},model:{value:e.editedEmployee.patronymic,callback:function(t){e.$set(e.editedEmployee,"patronymic",t)},expression:"editedEmployee.patronymic"}})],1)],1),a("div",{staticClass:"edit-block"},[a("AppHeaderIcon",{staticClass:"edit-block-header",attrs:{"header-level":"4","material-icon":"local_phone","header-text":"Контактные данные"}}),a("div",{staticClass:"edit-block-content"},[a("AppLineText",{attrs:{inputID:"input-city",label:"Город: ",maxLength:"20"},model:{value:e.editedEmployee.city,callback:function(t){e.$set(e.editedEmployee,"city",t)},expression:"editedEmployee.city"}}),a("AppLineText",{attrs:{inputID:"input-home-phone",label:"Телефон домашний: ",maxLength:"20"},model:{value:e.editedEmployee.homePhone,callback:function(t){e.$set(e.editedEmployee,"homePhone",t)},expression:"editedEmployee.homePhone"}}),a("AppLineText",{attrs:{inputID:"input-mobile-phone",label:"Телефон мобильный: ",maxLength:"20"},model:{value:e.editedEmployee.mobilePhone,callback:function(t){e.$set(e.editedEmployee,"mobilePhone",t)},expression:"editedEmployee.mobilePhone"}})],1)],1)]},proxy:!0}])})],1)},o=[],n=a("2909"),l=a("5530"),p=(a("99af"),a("b0c0"),a("2f62")),s=a("260b"),d=a("2721"),c=a("38a1"),m=a("373c"),r=a("1b06"),u=a("fac1"),E={name:"addEmployees.vue",components:{AppEditWrapper:d["a"],AppHeaderIcon:c["a"],AppButtonIcon:m["a"],AppLineText:r["a"],AppSelect:u["a"]},data:function(){return{editedEmployee:"",history:[]}},computed:Object(l["a"])({},Object(p["c"])(["authEmployee","employees","sites"])),created:function(){this.SET_EMPLOYEES_FROM_LOCAL_STORAGE(),this.SET_SITES_FROM_LOCAL_STORAGE(),this.editedEmployee=this.employees[this.$route.params.id]},methods:Object(l["a"])(Object(l["a"])({},Object(p["d"])(["SET_EMPLOYEES_FROM_SERVER","SET_EMPLOYEES_FROM_LOCAL_STORAGE","SET_SITES_FROM_LOCAL_STORAGE"])),{},{changeData:function(e,t){this.history.push({date:"[Дата: ".concat((new Date).toLocaleDateString()," Время: ").concat((new Date).toLocaleTimeString(),"]"),info:"был изменён ".concat(t,' на "').concat(e,'" сотрудником'),employee:{name:"".concat(this.authEmployee.surname," ").concat(this.authEmployee.name),id:this.authEmployee.id}})},editorExit:function(){this.$router.push("/employees")},saveEditedEmployee:function(e){var t=this;try{var a;this.history.push({date:"[Дата: ".concat((new Date).toLocaleDateString()," Время: ").concat((new Date).toLocaleTimeString(),"]"),info:"Работник сохранён работником",employee:{name:"".concat(this.authEmployee.surname," ").concat(this.authEmployee.name),id:this.authEmployee.id}}),(a=e.history).push.apply(a,Object(n["a"])(this.history))}catch(i){M.toast({html:"Внимание! Данный сотрудник не поддерживает историю"})}s["a"].database().ref("/employees/"+e.id).set(e).then((function(){t.SET_EMPLOYEES_FROM_SERVER(),t.editorExit()}))}})},y=E,h=a("2877"),b=Object(h["a"])(y,i,o,!1,null,null,null);t["default"]=b.exports}}]);
//# sourceMappingURL=chunk-2d224b0c.4ee1ce43.js.map