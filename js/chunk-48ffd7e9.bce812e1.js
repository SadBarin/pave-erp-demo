(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-48ffd7e9"],{"059f":function(e,t,n){"use strict";n("bdb2")},"1b06":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"container-line-text"}},[n("input",{staticClass:"line-text",attrs:{type:"text",maxlength:e.maxLength,id:e.inputID,placeholder:e.placeholder},domProps:{value:e.value},on:{input:function(t){return e.$emit("input",t.target.value)}}}),n("label",{staticClass:"line-text-label",attrs:{for:e.inputID}},[e._v(e._s(e.label))])])},o=[],r={name:"AppLinetext",props:{inputID:String,placeholder:String,maxLength:String,label:String,value:String}},c=r,p=(n("059f"),n("2877")),i=Object(p["a"])(c,a,o,!1,null,"6bb380f1",null);t["a"]=i.exports},3254:function(e,t,n){},3368:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("AppPopupWrapper",{attrs:{hidden:e.hidePopupStatus}},[n("AppTopPanel",{attrs:{header:e.header},scopedSlots:e._u([{key:"nav-buttons",fn:function(){return[n("AppButtonIcon",{attrs:{icon:"delete",size:"1.8rem",title:"Удалить"},on:{"button-click":function(t){return e.$emit("delete-element")}}}),n("AppButtonIcon",{attrs:{icon:"close",size:"1.8rem",title:"Закрыть"},on:{"button-click":function(t){return e.$emit("close-popup")}}})]},proxy:!0}])}),n("div",{staticClass:"popup-delete-wrapper"},[n("p",[e._t("popup-delete-content")],2)])],1)},o=[],r=n("a26a"),c=n("34b0"),p=n("373c"),i={name:"PopupDeleteWrapper",components:{AppPopupWrapper:r["a"],AppTopPanel:c["a"],AppButtonIcon:p["a"]},props:{hidePopupStatus:Boolean,header:String}},l=i,u=(n("93f4"),n("2877")),s=Object(u["a"])(l,a,o,!1,null,"18d3d347",null);t["a"]=s.exports},"34b0":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app-top-panel"}},[n("h3",{staticClass:"top-panel-header"},[e._v(e._s(e.header))]),n("div",{staticClass:"top-panel-nav-buttons"},[e._t("nav-buttons")],2)])},o=[],r={name:"AppTopPanel",props:{header:String}},c=r,p=(n("bdaf"),n("2877")),i=Object(p["a"])(c,a,o,!1,null,"11bb2a0a",null);t["a"]=i.exports},"3a7b":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("AppPopupWrapper",{attrs:{hidden:e.hidden}},[n("AppTopPanel",{attrs:{header:e.header},scopedSlots:e._u([{key:"nav-buttons",fn:function(){return[n("AppButtonIcon",{attrs:{icon:"add",size:"1.8rem",title:"Добавить"},on:{"button-click":function(t){return e.$emit("popup-add")}}}),n("AppButtonIcon",{attrs:{icon:"close",size:"1.8rem",title:"Закрыть"},on:{"button-click":function(t){return e.$emit("popup-close")}}})]},proxy:!0}])}),n("div",{staticClass:"popup-add-wrapper"},[e._t("popup-add-content")],2)],1)},o=[],r=n("a26a"),c=n("34b0"),p=n("373c"),i={name:"PopupAddWrapper",components:{AppPopupWrapper:r["a"],AppTopPanel:c["a"],AppButtonIcon:p["a"]},props:{hidden:Boolean,header:String,objectAdded:Object},data:function(){return{addedCity:{},firstNote:"Город был создан"}},created:function(){this.renewAddedData()},methods:{renewAddedData:function(){this.addedCity={id:Date.now(),name:"",notes:["Город был создан"],notesCount:"5"},this.firstNote="Город был создан"},addCity:function(e){this.$emit("add-city",e),this.renewAddedData()}}},l=i,u=n("2877"),s=Object(u["a"])(l,a,o,!1,null,null,null);t["a"]=s.exports},5663:function(e,t,n){"use strict";n("637c")},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,n){var a=n("1d80"),o=n("5899"),r="["+o+"]",c=RegExp("^"+r+r+"*"),p=RegExp(r+r+"*$"),i=function(e){return function(t){var n=String(a(t));return 1&e&&(n=n.replace(c,"")),2&e&&(n=n.replace(p,"")),n}};e.exports={start:i(1),end:i(2),trim:i(3)}},"633e":function(e,t,n){},"637c":function(e,t,n){},6600:function(e,t,n){"use strict";n("6d18")},"6d18":function(e,t,n){},7156:function(e,t,n){var a=n("861d"),o=n("d2bb");e.exports=function(e,t,n){var r,c;return o&&"function"==typeof(r=t.constructor)&&r!==n&&a(c=r.prototype)&&c!==n.prototype&&o(e,c),e}},"73a7":function(e,t,n){"use strict";n("94ec")},"8c56":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app-deal"}},[n("DealPopupAdd",{attrs:{popupHidden:e.popupAddDeal},on:{"popup-toggle":e.popupAddToggle,"add-deal":e.addDeal}}),n("AppTopPanel",{attrs:{header:"Список сделок"},scopedSlots:e._u([{key:"nav-buttons",fn:function(){return[n("AppButtonIcon",{attrs:{icon:"add",size:"1.8rem",title:"Добавить сделки"},on:{"button-click":function(t){return e.popupAddToggle()}}})]},proxy:!0}])}),n("div",{staticClass:"app-deal-content"},[n("DealsTable",{attrs:{deals:e.deals},on:{"remove-deal":e.removeDeal}})],1)],1)},o=[],r=n("5530"),c=(n("b0c0"),n("fb6a"),n("260b")),p=n("2f62"),i=n("34b0"),l=n("373c"),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("PopupAddWrapper",{attrs:{hidden:e.popupHidden,header:"Добавление сделки"},on:{"popup-add":function(t){return e.addDeal(e.addedDeal)},"popup-close":function(t){return e.$emit("popup-toggle")}},scopedSlots:e._u([{key:"popup-add-content",fn:function(){return[n("AppLineText",{attrs:{inputID:"input-deal-name",label:"Название: ",maxLength:"20"},model:{value:e.addedDeal.name,callback:function(t){e.$set(e.addedDeal,"name",t)},expression:"addedDeal.name"}}),n("AppLineDate",{attrs:{dateID:"input-deal-date",label:"Дата: "},model:{value:e.addedDeal.date,callback:function(t){e.$set(e.addedDeal,"date",t)},expression:"addedDeal.date"}}),n("AppSelect",{attrs:{selectID:"select",label:"Заказчик: "},model:{value:e.addedDeal.customer,callback:function(t){e.$set(e.addedDeal,"customer",t)},expression:"addedDeal.customer"}},e._l(e.customers,(function(t){return n("option",{key:t.id,domProps:{value:t.name}},[e._v(e._s(t.name))])})),0),n("AppSelect",{attrs:{selectID:"select",label:"Рабочий: "},model:{value:e.addedDeal.workerID,callback:function(t){e.$set(e.addedDeal,"workerID",t)},expression:"addedDeal.workerID"}},e._l(e.workers,(function(t){return n("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.surname)+" "+e._s(t.name))])})),0)]},proxy:!0}])})},s=[],d=(n("99af"),n("3a7b")),f=n("1b06"),m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"container-line-date"}},[n("input",{staticClass:"line-date",attrs:{type:"datetime-local",id:e.dateID,placeholder:e.placeholder},domProps:{value:e.value},on:{input:function(t){return e.$emit("input",t.target.value)}}}),n("label",{staticClass:"line-date-label",attrs:{for:e.dateID}},[e._v(e._s(e.label))])])},b=[],v={name:"AppLineDate",props:{dateID:String,placeholder:String,label:String,value:String}},_=v,h=(n("ef11"),n("2877")),A=Object(h["a"])(_,m,b,!1,null,"32745002",null),S=A.exports,D=n("fac1"),E={name:"DealPopupAdd",data:function(){return{addedDeal:{}}},computed:Object(r["a"])({},Object(p["c"])(["workers","customers"])),components:{PopupAddWrapper:d["a"],AppLineText:f["a"],AppLineDate:S,AppSelect:D["a"]},props:{popupHidden:Boolean},created:function(){this.renewAddedData(),this.SET_WORKERS_FROM_LOCAL_STORAGE(),this.SET_CUSTOMERS_FROM_LOCAL_STORAGE()},methods:Object(r["a"])(Object(r["a"])({},Object(p["d"])(["SET_WORKERS_FROM_LOCAL_STORAGE","SET_CUSTOMERS_FROM_LOCAL_STORAGE"])),{},{renewAddedData:function(){this.addedDeal={id:Date.now(),name:"",customer:"",date:"",workerID:"",notes:["Сделка была создана"],notesCount:"5",history:[{date:"[Дата: ".concat((new Date).toLocaleDateString()," Время: ").concat((new Date).toLocaleTimeString(),"]"),info:"Сделка создана ",employee:{name:"",id:""}}]}},addDeal:function(e){this.$emit("add-deal",e),this.renewAddedData()}})},g=E,O=Object(h["a"])(g,u,s,!1,null,null,null),T=O.exports,w=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("AppTableWrapper",{scopedSlots:e._u([{key:"table-content",fn:function(){return[n("PopupDeleteWrapper",{attrs:{hidePopupStatus:e.popupRemoveHidden,header:"Удаление сделки "+e.currentDeal.name},on:{"close-popup":function(t){return e.popupRemoveToggle({})},"delete-element":function(t){e.$emit("remove-deal",e.currentDeal.id),e.popupRemoveToggle({})}},scopedSlots:e._u([{key:"popup-delete-content",fn:function(){return[e._v(" После нажатия на иконку корзины будет удалёна сделка "),n("b",[e._v(e._s(e.currentDeal.name))])]},proxy:!0}])}),n("AppTableRow",{attrs:{"columns-count":e.columnsCount,"columns-size":e.columnsSize,"columns-array":e.columnHeaderArray,"row-header":!0},scopedSlots:e._u([{key:"column-action",fn:function(){return[n("AppButtonIcon",{attrs:{size:"1.2rem"}}),n("AppButtonIcon",{attrs:{size:"1.2rem"}}),n("AppButtonIcon",{attrs:{size:"1.2rem"}})]},proxy:!0}])}),e._l(e.deals,(function(t){return[n("AppTableRow",{key:t.id,attrs:{"columns-count":e.columnsCount,"columns-size":e.columnsSize,"columns-array":[t.name,t.customer,t.worker,t.date,t.time,t.notes[t.notes.length-1]]},on:{dbclickEvent:function(n){return e.$router.push({name:"dealEdit",params:{id:t.id}})}},scopedSlots:e._u([{key:"column-action",fn:function(){return[n("AppButtonIcon",{attrs:{icon:"description",title:"История сделки",size:"1.2rem"},on:{"button-click":function(n){return e.$router.push({name:"dealHistory",params:{id:t.id}})}}}),n("AppButtonIcon",{attrs:{icon:"create",title:"Редактировать сделку",size:"1.2rem"},on:{"button-click":function(n){return e.$router.push({name:"dealEdit",params:{id:t.id}})}}}),n("AppButtonIcon",{attrs:{icon:"delete",title:"Удалить сделки",size:"1.2rem"},on:{"button-click":function(n){return e.popupRemoveToggle(t)}}})]},proxy:!0}],null,!0)})]}))]},proxy:!0}])})},R=[],y=n("3368"),I=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"app-table"},[e._t("table-content")],2)},k=[],x={name:"AppTable"},C=x,$=(n("cc9b"),Object(h["a"])(C,I,k,!1,null,"cc232c48",null)),L=$.exports,P=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:"app-table-row "+(e.rowHeader?"row-header":"row-simple"),style:{"--columns-count":e.columnsCount,"--columns-size":e.columnsSize}},[n("div",{staticClass:"row-info"},e._l(e.columnsArray,(function(t,a){return n("div",{key:a,on:{dblclick:function(t){return e.$emit("dbclickEvent")}}},[e._v(" "+e._s(t)+" ")])})),0),n("div",{staticClass:"row-action"},[n("div",{staticClass:"column-action"},[e._t("column-action")],2)])])},j=[],N=(n("a9e3"),{name:"AppTableRow",props:{columnsCount:Number,columnsSize:String,columnsArray:Array,rowHeader:Boolean}}),B=N,z=(n("5663"),Object(h["a"])(B,P,j,!1,null,"60c4b045",null)),M=z.exports,F={name:"DealsTable",data:function(){return{popupRemoveHidden:!0,currentDeal:{},columnsCount:6,columnsSize:"1fr",columnHeaderArray:["Название","Заказчик","Рабочий","Дата","Время","Заметка"]}},props:{deals:Object},components:{PopupDeleteWrapper:y["a"],AppButtonIcon:l["a"],AppTableWrapper:L,AppTableRow:M},methods:{popupRemoveToggle:function(e){this.popupRemoveHidden=!this.popupRemoveHidden,this.currentDeal=e}}},W=F,H=Object(h["a"])(W,w,R,!1,null,null,null),G=H.exports,V={name:"TheDeals",components:{AppTopPanel:i["a"],AppButtonIcon:l["a"],DealPopupAdd:T,DealsTable:G},data:function(){return{popupAddDeal:!0}},computed:Object(r["a"])({},Object(p["c"])(["deals","workers"])),created:function(){this.SET_DEALS_FROM_LOCAL_STORAGE()},methods:Object(r["a"])(Object(r["a"])({},Object(p["d"])(["SET_DEALS_FROM_LOCAL_STORAGE","SET_DEALS_FROM_SERVER","SET_WORKERS_FROM_SERVER"])),{},{popupAddToggle:function(){this.popupAddDeal=!this.popupAddDeal},removeDeal:function(e){var t=this;c["a"].database().ref("/deals/"+e).remove().then((function(){console.log("Сделка удалёна 🗑️"),t.SET_DEALS_FROM_SERVER()}))},addDeal:function(e){var t=this;this.popupAddToggle(),e.name=e.name[0].toUpperCase()+e.name.substring(1);var n=this.workers[e.workerID];e.worker=n.surname+" "+n.name;var a=e.date;e.worker=n.surname+" "+n.name,e.date=a.slice(0,10),e.time=a.slice(11,16),n.events.push({id:Date.now(),title:e.name,date:a}),c["a"].database().ref("/workers/"+n.id).set(n).then((function(){t.SET_WORKERS_FROM_SERVER()})),c["a"].database().ref("/deals/"+e.id).set(e).then((function(){console.log("Сделка добавлена ➕"),t.popupAddHidden=!0,t.SET_DEALS_FROM_SERVER()}))}})},U=V,K=Object(h["a"])(U,a,o,!1,null,null,null);t["default"]=K.exports},"93f4":function(e,t,n){"use strict";n("e420")},"94ec":function(e,t,n){},"957b":function(e,t,n){},"99af":function(e,t,n){"use strict";var a=n("23e7"),o=n("d039"),r=n("e8b5"),c=n("861d"),p=n("7b0b"),i=n("50c4"),l=n("8418"),u=n("65f0"),s=n("1dde"),d=n("b622"),f=n("2d00"),m=d("isConcatSpreadable"),b=9007199254740991,v="Maximum allowed index exceeded",_=f>=51||!o((function(){var e=[];return e[m]=!1,e.concat()[0]!==e})),h=s("concat"),A=function(e){if(!c(e))return!1;var t=e[m];return void 0!==t?!!t:r(e)},S=!_||!h;a({target:"Array",proto:!0,forced:S},{concat:function(e){var t,n,a,o,r,c=p(this),s=u(c,0),d=0;for(t=-1,a=arguments.length;t<a;t++)if(r=-1===t?c:arguments[t],A(r)){if(o=i(r.length),d+o>b)throw TypeError(v);for(n=0;n<o;n++,d++)n in r&&l(s,d,r[n])}else{if(d>=b)throw TypeError(v);l(s,d++,r)}return s.length=d,s}})},a26a:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.hidden?"hidden":"",attrs:{id:"app-popup-wrapper"}},[n("div",{staticClass:"popup-wrapper-overlay"},[n("div",{staticClass:"popup-wrapper-content"},[e._t("default")],2)])])},o=[],r={name:"PopupWrapper",props:{hidden:Boolean}},c=r,p=(n("73a7"),n("2877")),i=Object(p["a"])(c,a,o,!1,null,"70be0339",null);t["a"]=i.exports},a9e3:function(e,t,n){"use strict";var a=n("83ab"),o=n("da84"),r=n("94ca"),c=n("6eeb"),p=n("5135"),i=n("c6b6"),l=n("7156"),u=n("c04e"),s=n("d039"),d=n("7c73"),f=n("241c").f,m=n("06cf").f,b=n("9bf2").f,v=n("58a8").trim,_="Number",h=o[_],A=h.prototype,S=i(d(A))==_,D=function(e){var t,n,a,o,r,c,p,i,l=u(e,!1);if("string"==typeof l&&l.length>2)if(l=v(l),t=l.charCodeAt(0),43===t||45===t){if(n=l.charCodeAt(2),88===n||120===n)return NaN}else if(48===t){switch(l.charCodeAt(1)){case 66:case 98:a=2,o=49;break;case 79:case 111:a=8,o=55;break;default:return+l}for(r=l.slice(2),c=r.length,p=0;p<c;p++)if(i=r.charCodeAt(p),i<48||i>o)return NaN;return parseInt(r,a)}return+l};if(r(_,!h(" 0o1")||!h("0b1")||h("+0x1"))){for(var E,g=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof g&&(S?s((function(){A.valueOf.call(n)})):i(n)!=_)?l(new h(D(t)),n,g):D(t)},O=a?f(h):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),T=0;O.length>T;T++)p(h,E=O[T])&&!p(g,E)&&b(g,E,m(h,E));g.prototype=A,A.constructor=g,c(o,_,g)}},bdaf:function(e,t,n){"use strict";n("633e")},bdb2:function(e,t,n){},cc9b:function(e,t,n){"use strict";n("957b")},e420:function(e,t,n){},ef11:function(e,t,n){"use strict";n("3254")},fac1:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"container-select"}},[n("select",{staticClass:"app-select browser-default",attrs:{id:e.selectID},domProps:{value:e.value},on:{input:function(t){return e.$emit("input",t.target.value)}}},[e._t("default")],2),n("label",{staticClass:"select-label",attrs:{for:e.selectID}},[e._v(e._s(e.label))])])},o=[],r={name:"AppSelect",props:{selectID:String,label:String,value:String}},c=r,p=(n("6600"),n("2877")),i=Object(p["a"])(c,a,o,!1,null,"152ee0a8",null);t["a"]=i.exports},fb6a:function(e,t,n){"use strict";var a=n("23e7"),o=n("861d"),r=n("e8b5"),c=n("23cb"),p=n("50c4"),i=n("fc6a"),l=n("8418"),u=n("b622"),s=n("1dde"),d=n("ae40"),f=s("slice"),m=d("slice",{ACCESSORS:!0,0:0,1:2}),b=u("species"),v=[].slice,_=Math.max;a({target:"Array",proto:!0,forced:!f||!m},{slice:function(e,t){var n,a,u,s=i(this),d=p(s.length),f=c(e,d),m=c(void 0===t?d:t,d);if(r(s)&&(n=s.constructor,"function"!=typeof n||n!==Array&&!r(n.prototype)?o(n)&&(n=n[b],null===n&&(n=void 0)):n=void 0,n===Array||void 0===n))return v.call(s,f,m);for(a=new(void 0===n?Array:n)(_(m-f,0)),u=0;f<m;f++,u++)f in s&&l(a,u,s[f]);return a.length=u,a}})}}]);
//# sourceMappingURL=chunk-48ffd7e9.bce812e1.js.map