(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-03063454"],{2912:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"page-title flex-between-center"},[s("div",{staticClass:"flex-center"},[s("h3",{staticClass:"right-margin-big"},[t._v("–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –ø–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è")]),s("div",{staticClass:"flex-center"},[s("button",{staticClass:"btn-transparent transparent btn-page-title blue-text text-darken-1",attrs:{title:"–û–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É"},on:{click:t.updateCustomers}},[s("i",{staticClass:"material-icons middle-material-icons"},[t._v("autorenew")])])])]),s("EmployeeAdd",{attrs:{placeholder:"–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞"},on:{"add-element":t.addEmployee}})],1),s("section",[s("CustomerEmployeesTable",{attrs:{customers:t.subdivisionEmployees},on:{"remove-customer":t.removeEmployee}})],1)])},i=[],a=s("5530"),r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.popupShow?s("Popup",{attrs:{"popup-toast":"–ö–ª–∏–µ–Ω—Ç –±—ã–ª —É–¥–∞–ª—ë–Ω!"},on:{yes:function(e){return t.removeCustomer(t.customer)},no:function(e){return t.popupHidden()}},scopedSlots:t._u([{key:"title-popup",fn:function(){return[t._v(" –£–¥–∞–ª–∏—Ç—å? ")]},proxy:!0},{key:"text-info-popup",fn:function(){return[t._v(" –ö–ª–∏–µ–Ω—Ç "),s("b",[t._v(t._s(t.customer.name))]),t._v(" –±—É–¥–µ—Ç —É–¥–∞–ª—ë–Ω ")]},proxy:!0}],null,!1,12950149)}):t._e(),s("table",[t._m(0),t._l(t.customers,(function(e){return s("tr",{key:e.value},[s("td",[s("div",{staticClass:"parent-clip-text"},[s("p",{staticClass:"clip-text",attrs:{title:e.name}},[t._v(t._s(e.name))])])]),s("td",[s("div",{staticClass:"parent-clip-text"},[s("p",{staticClass:"clip-text",attrs:{title:e.name}},[t._v(t._s(e.surname))])])]),s("td",[s("div",{staticClass:"parent-clip-text"},[s("p",{staticClass:"clip-text",attrs:{title:e.name}},[t._v(t._s(e.patronymic))])])]),s("td",[s("div",{staticClass:"parent-clip-text"},[s("p",{staticClass:"clip-text",attrs:{title:e.name}},[t._v(t._s(e.post))])])]),s("td",[s("div",{staticClass:"parent-clip-text"},[s("p",{staticClass:"clip-text",attrs:{title:e.name}},[t._v(t._s(e.email))])])]),s("td",[s("div",{staticClass:"flex-center btns-collection"},[s("router-link",{staticClass:"btn-transparent transparent waves-effect waves-light auth-submit blue-text text-darken-1",attrs:{title:"–ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å",to:{name:"subdivisionAboutEmployee",params:{id:t.customerId,subId:t.subId,empId:e.id}}}},[s("i",{staticClass:"material-icons"},[t._v("remove_red_eye")])]),s("router-link",{staticClass:"btn-transparent transparent waves-effect waves-light auth-submit blue-text text-darken-1",attrs:{title:"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å",to:{name:"subdivisionEditEmployee",params:{id:t.customerId,subId:t.subId,empId:e.id}}}},[s("i",{staticClass:"material-icons"},[t._v("create")])]),e.edited?t._e():s("button",{staticClass:"btn-transparent transparent waves-effect waves-light auth-submit blue-text text-darken-1",attrs:{title:"–£–¥–∞–ª–∏—Ç—å"},on:{click:function(s){t.popupVisibility(e),t.setCustomer(e)}}},[s("i",{staticClass:"material-icons"},[t._v("delete")])])],1)])])}))],2)],1)},o=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("tr",[s("th",[t._v("–§–∞–º–∏–ª–∏—è")]),s("th",[t._v("–ò–º—è")]),s("th",[t._v("–û—Ç—á–µ—Å—Ç–≤–æ")]),s("th",[t._v("–î–æ–ª–∂–Ω–æ—Å—Ç—å")]),s("th",[t._v("–ü–æ—á—Ç–∞")])])}],u=s("5614"),c={name:"CustomerEmployeesTable",mixins:[u["a"]],props:{customers:Object},data:function(){return{customer:""}},computed:{subId:function(){return this.$route.params.subId},customerId:function(){return this.$route.params.id},empId:function(){return this.$route.params.empId}},methods:{setCustomer:function(t){this.customer=t},removeCustomer:function(t){this.$emit("remove-customer",t.id),this.popupHidden()}}},l=c,m=s("2877"),p=Object(m["a"])(l,r,o,!1,null,"12b01fdc",null),d=p.exports,b=s("8e20"),v=s("2f62"),_=s("260b"),f={name:"CustomerEmployees",components:{CustomerEmployeesTable:d,EmployeeAdd:b["a"]},computed:Object(a["a"])(Object(a["a"])({},Object(v["c"])(["customers","authEmployee"])),{},{customerId:function(){return String(this.$route.params.id)},currentCustomer:function(){return this.customers[this.customerId]},customerSubdivisions:function(){return this.currentCustomer.subdivisions},currentSubdivision:function(){return this.customerSubdivisions[this.$route.params.subId]},subdivisionEmployees:function(){return this.currentSubdivision.employees}}),created:function(){this.SET_CUSTOMERS_FROM_LOCAL_STORAGE(),this.SET_EMPLOYEES_FROM_LOCAL_STORAGE()},methods:Object(a["a"])(Object(a["a"])({},Object(v["d"])(["SET_CUSTOMERS_FROM_SERVER","SET_CUSTOMERS_FROM_LOCAL_STORAGE","SET_EMPLOYEES_FROM_LOCAL_STORAGE"])),{},{removeEmployee:function(t){var e=this;_["a"].database().ref("/customers/"+this.customerId+"/subdivisions/"+this.currentSubdivision.id+"/employees/"+t).remove().then((function(){e.SET_CUSTOMERS_FROM_SERVER(),console.log("–ö–ª–∏–µ–Ω—Ç —É–¥–∞–ª—ë–Ω üóëÔ∏è")}))},addEmployee:function(t){var e=this,s={id:Date.now(),name:t,surname:"–ù–æ–≤—ã–π",patronymic:"–°–æ—Ç—Ä—É–¥–Ω–∏–∫",post:"–°–æ—Ç—Ä—É–¥–Ω–∏–∫",email:"",number:"",notes:["–ù–æ–≤—ã–π —Ä–∞–±–æ—á–∏–π –∫–ª–∏–µ–Ω—Ç–∞"]};_["a"].database().ref("/customers/"+this.customerId+"/subdivisions/"+this.currentSubdivision.id+"/employees/"+s.id).set(s).then((function(){e.SET_CUSTOMERS_FROM_SERVER(),console.log("–ö–ª–∏–µ–Ω—Ç –¥–æ–±–∞–≤–ª–µ–Ω ‚ûï")}))},updateCustomers:function(){this.SET_CUSTOMERS_FROM_SERVER(),M.toast({html:"–ù–∞—à–∏ –∫–ª–∏–µ–Ω—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã"})}})},h=f,E=Object(m["a"])(h,n,i,!1,null,null,null);e["default"]=E.exports},"8e20":function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("form",{staticClass:"flex-center",on:{submit:function(e){return e.preventDefault(),t.submitElement(e)}}},[s("div",{staticClass:"input-field margin-fix right-margin-little"},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.name,expression:"name",modifiers:{trim:!0}}],staticClass:"input-add",attrs:{type:"text",maxlength:"50",placeholder:t.placeholder},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._m(0)])},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{staticClass:"btn-transparent transparent btn-page-title blue-text text-darken-1",attrs:{type:"submit"}},[s("i",{staticClass:"material-icons big-material-icons"},[t._v("add")])])}],a=(s("b0c0"),{name:"InputAdd",props:{placeholder:String},data:function(){return{name:""}},methods:{submitElement:function(){console.log(this.name),this.$emit("add-element",this.name),this.name=""}}}),r=a,o=s("2877"),u=Object(o["a"])(r,n,i,!1,null,null,null);e["a"]=u.exports},b0c0:function(t,e,s){var n=s("83ab"),i=s("9bf2").f,a=Function.prototype,r=a.toString,o=/^\s*function ([^ (]*)/,u="name";n&&!(u in a)&&i(a,u,{configurable:!0,get:function(){try{return r.call(this).match(o)[1]}catch(t){return""}}})}}]);
//# sourceMappingURL=chunk-03063454.7cab1a80.js.map