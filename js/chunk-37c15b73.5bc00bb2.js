(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-37c15b73"],{"0677":function(t,e,i){},"159b":function(t,e,i){var s=i("da84"),a=i("fdbc"),c=i("17c2"),n=i("9112");for(var o in a){var r=s[o],l=r&&r.prototype;if(l&&l.forEach!==c)try{n(l,"forEach",c)}catch(u){l.forEach=c}}},"17c2":function(t,e,i){"use strict";var s=i("b727").forEach,a=i("a640"),c=i("ae40"),n=a("forEach"),o=c("forEach");t.exports=n&&o?[].forEach:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}},4160:function(t,e,i){"use strict";var s=i("23e7"),a=i("17c2");s({target:"Array",proto:!0,forced:[].forEach!=a},{forEach:a})},"504e":function(t,e,i){"use strict";i("7857")},"6c12":function(t,e,i){},7857:function(t,e,i){},"8ce9":function(t,e,i){"use strict";i("0677")},"987c":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"page-title"},[i("div",{staticClass:"title-container"},[i("h3",[t._v("Список городов")]),i("div",{staticClass:"title-btn-container"},[i("button",{staticClass:"btn-flat btn-title",on:{click:function(e){return t.updateCollection("sites")}}},[i("i",{staticClass:"material-icons"},[t._v("autorenew")])])])]),i("AddCardSites",{on:{"add-city":t.addCity}})],1),i("div",[t.sites.length?i("ListSites",{attrs:{sites:t.sites},on:{"remove-city":t.removeCity}}):i("div",{staticClass:"empty-list"},[i("h5",{staticClass:"empty-list-title"},[i("i",{staticClass:"material-icons"},[t._v("mood_bad")]),t._v(" Городов не осталось!")]),i("p",[t._v("Добавьте город, чтобы начать работать над ним.")])])],1)])},a=[],c=(i("4de4"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("form",{staticClass:"button-container",on:{submit:function(e){return e.preventDefault(),t.submitSites(e)}}},[i("div",{staticClass:"input-field input-field-blue"},[i("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.cityName,expression:"cityName",modifiers:{trim:!0}}],staticClass:"input-add",class:{invalid:t.$v.cityName.$dirty&&!t.$v.cityName.required||t.$v.cityName.$dirty&&!t.$v.cityName.minLength},attrs:{type:"text",id:"city"},domProps:{value:t.cityName},on:{input:function(e){e.target.composing||(t.cityName=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),i("label",{attrs:{for:"city"}},[t._v("Город")]),t.$v.cityName.$dirty&&!t.$v.cityName.required?i("small",{staticClass:"helper-text invalid"},[t._v(" Введите город ")]):t.$v.cityName.$dirty&&!t.$v.cityName.minLength?i("small",{staticClass:"helper-text invalid"},[t._v(" Город должен содержать не менее "+t._s(t.$v.cityName.$params.minLength.min)+" символов. ")]):t._e()]),t._m(0)])}),n=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("button",{staticClass:"btn-flat waves-effect waves-light auth-submit blue darken-1 white-text",attrs:{type:"submit"}},[i("i",{staticClass:"material-icons"},[t._v("add")]),t._v(" Добавить город ")])}],o=(i("498a"),i("b5ae")),r={name:"AddCardSites",data:function(){return{cityName:""}},validations:{cityName:{required:o["required"],minLength:Object(o["minLength"])(2)}},methods:{submitSites:function(){if(this.$v.$invalid)this.$v.$touch();else if(this.cityName.trim()){var t={id:Date.now(),cityName:this.cityName,employees:0,edited:!1};this.$emit("add-city",t),this.cityName=""}}}},l=r,u=(i("ed1a"),i("2877")),d=Object(u["a"])(l,c,n,!1,null,"469adce3",null),m=d.exports,v=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",t._l(t.sites,(function(e){return i("CardSites",{key:e.id,attrs:{city:e},on:{"remove-city":t.removeCity}})})),1)},f=[],h=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"row"},[t.overlayShow?[i("div",{staticClass:"popup-overlay"},[i("form",{staticClass:"card auth-card popup"},[i("div",{staticClass:"card-content"},[t._m(0),i("span",{staticClass:"popup-subtitle"},[t._v("Город: "+t._s(t.city.cityName))])]),i("div",{staticClass:"card-action btn-popup"},[i("button",{staticClass:"btn-flat white-text waves-effect waves-light auth-submit blue darken-1",attrs:{type:"submit"},on:{click:function(e){return t.$emit("remove-city",t.city.id)}}},[i("i",{staticClass:"material-icons"},[t._v("check")]),t._v(" Да ")]),i("button",{staticClass:"btn-flat white-text waves-effect waves-light auth-submit blue darken-1",attrs:{type:"submit"},on:{click:t.overlayHidden}},[i("i",{staticClass:"material-icons"},[t._v("clear")]),t._v(" Нет ")])])])])]:t._e(),i("div",{staticClass:"col s12"},[i("div",{staticClass:"card-panel blue darken-1 white-text"},[i("div",{staticClass:"card-content dark-text card-line"},[i("div",{staticClass:"info-container"},[i("h6",[i("i",{staticClass:"material-icons"},[t._v("location_city")]),t._v(" Город: "+t._s(t.city.cityName))]),i("h6",[i("i",{staticClass:"material-icons"},[t._v("group")]),t._v(" Количество сотрудников: "+t._s(t.city.employees))]),t.city.edited?i("p",{staticClass:"card-report"},[i("i",{staticClass:"material-icons"},[t._v("report")]),t._v(" Карточка сейчас редактируется другим сотрудником ")]):t._e()]),i("div",{staticClass:"button-container"},[t.city.edited?t._e():i("button",{staticClass:"btn-flat waves-effect waves-light auth-submit white-text",on:{click:t.editedCityStatus}},[i("i",{staticClass:"material-icons"},[t._v("create")]),t._v(" Редактировать ")]),t.city.edited?i("router-link",{staticClass:"btn-flat waves-effect waves-light auth-submit blue-text text-lighten-3",attrs:{to:"/sites/editor"}},[i("i",{staticClass:"material-icons"},[t._v("border_color")]),t._v(" Редактировать принудительно ")]):t._e(),t.city.edited?t._e():i("button",{staticClass:"btn-flat waves-effect waves-light auth-submit white-text",on:{click:t.overlayVisibility}},[i("i",{staticClass:"material-icons"},[t._v("delete")]),t._v(" Удалить ")])],1)])])])],2)},y=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{staticClass:"card-title"},[t._v("Удалить элемент? "),i("br")])}],p=(i("c740"),i("4160"),i("a9e3"),i("159b"),{name:"CardSites",props:{city:{type:Object},index:Number},data:function(){return{sites:[{}],employees:[{}],overlayShow:!1,countEmployees:0}},methods:{overlayVisibility:function(){this.overlayShow=!0},overlayHidden:function(){this.overlayShow=!1},editedCityStatus:function(){var t=this,e=this.sites.findIndex((function(e){return e.id===t.city.id}));this.sites[e].edited=!0,this.saveSites(),this.$router.push("/sites/editor")},amountEmployees:function(){var t=this;try{var e=this.sites.findIndex((function(e){return e.id===t.city.id}));this.employees.forEach((function(i){i.city===t.sites[e].cityName&&t.countEmployees++})),this.sites[e].employees=this.countEmployees}catch(i){}this.saveSites()},saveSites:function(){var t=JSON.stringify(this.sites);localStorage.setItem("sites",t)}},mounted:function(){if(localStorage.getItem("sites"))try{this.sites=JSON.parse(localStorage.getItem("sites"))}catch(t){localStorage.removeItem("sites")}if(localStorage.getItem("employees"))try{this.employees=JSON.parse(localStorage.getItem("employees"))}catch(t){localStorage.removeItem("employees")}this.amountEmployees()}}),C=p,b=(i("8ce9"),Object(u["a"])(C,h,y,!1,null,"ca6a099e",null)),S=b.exports,_={name:"ListSites",components:{CardSites:S},methods:{removeCity:function(t){this.$emit("remove-city",t)}},props:["sites"]},g=_,L=(i("504e"),Object(u["a"])(g,v,f,!1,null,"24e285e9",null)),w=L.exports,N={name:"Sites",components:{ListSites:w,AddCardSites:m},data:function(){return{sites:[{}],updateTimeout:6e4}},methods:{removeCity:function(t){this.sites=this.sites.filter((function(e){return e.id!==t})),this.saveCollection(this.sites,"sites")},addCity:function(t){this.sites.push(t),this.saveCollection(this.sites,"sites")},saveCollection:function(t,e){var i=JSON.stringify(t);localStorage.setItem(e,i)},updateCollection:function(t){if(localStorage.getItem(t))try{this.sites=JSON.parse(localStorage.getItem(t))}catch(e){localStorage.removeItem(t)}}},mounted:function(){var t=this;this.updateCollection("sites"),setInterval((function(){return t.updateCollection("sites")}),this.updateTimeout)}},$=N,x=Object(u["a"])($,s,a,!1,null,null,null);e["default"]=x.exports},a640:function(t,e,i){"use strict";var s=i("d039");t.exports=function(t,e){var i=[][t];return!!i&&s((function(){i.call(null,e||function(){throw 1},1)}))}},ed1a:function(t,e,i){"use strict";i("6c12")},fdbc:function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=chunk-37c15b73.5bc00bb2.js.map