(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-079daf20"],{"1b06":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"container-line-text"}},[n("input",{staticClass:"line-text",attrs:{type:"text",maxlength:t.maxLength,id:t.inputID,placeholder:t.placeholder},domProps:{value:t.value},on:{input:function(e){return t.$emit("input",e.target.value)}}}),n("label",{staticClass:"line-text-label",attrs:{for:t.inputID}},[t._v(t._s(t.label))])])},o=[],p={name:"AppInput",props:{inputID:String,placeholder:String,maxLength:String,label:String,value:String}},i=p,r=(n("f8a1"),n("2877")),s=Object(r["a"])(i,a,o,!1,null,"114e77c1",null);e["a"]=s.exports},3368:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("AppPopupWrapper",{attrs:{hidden:t.hidePopupStatus}},[n("AppTopPanel",{attrs:{header:t.header},scopedSlots:t._u([{key:"nav-buttons",fn:function(){return[n("AppButtonIcon",{attrs:{icon:"delete",title:"Удалить"},on:{"button-click":function(e){return t.$emit("delete-element")}}}),n("AppButtonIcon",{attrs:{icon:"close",title:"Закрыть"},on:{"button-click":function(e){return t.$emit("close-popup")}}})]},proxy:!0}])}),n("div",{staticClass:"popup-delete-wrapper"},[n("p",[t._t("popup-delete-content")],2)])],1)},o=[],p=n("a26a"),i=n("34b0"),r=n("373c"),s={name:"PopupDeleteWrapper",components:{AppPopupWrapper:p["a"],AppTopPanel:i["a"],AppButtonIcon:r["a"]},props:{hidePopupStatus:Boolean,header:String}},l=s,c=(n("8b19"),n("2877")),u=Object(c["a"])(l,a,o,!1,null,"e63b1b7e",null);e["a"]=u.exports},"34b0":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app-top-panel"}},[n("h3",{staticClass:"top-panel-header"},[t._v(t._s(t.header))]),n("div",{staticClass:"top-panel-nav-buttons"},[t._t("nav-buttons")],2)])},o=[],p={name:"AppTopPanel",props:{header:String}},i=p,r=(n("be66"),n("2877")),s=Object(r["a"])(i,a,o,!1,null,"5ba3c617",null);e["a"]=s.exports},"373c":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-button-container"},[t.pressed?n("div",{staticClass:"app-button pressed",attrs:{title:t.title}},[n("i",{staticClass:"material-icons app-button-icon",style:"font-size: "+t.size+" !important"},[t._v(t._s(t.icon))])]):n("button",{staticClass:"app-button",attrs:{title:t.title},on:{click:function(e){return t.$emit("button-click")}}},[n("i",{staticClass:"material-icons app-button-icon",style:"font-size: "+t.size+" !important"},[t._v(t._s(t.icon))])])])},o=[],p={name:"AppButtonIcon",props:{icon:String,size:String,title:String,pressed:Boolean}},i=p,r=(n("38c5"),n("2877")),s=Object(r["a"])(i,a,o,!1,null,"0aed6b1a",null);e["a"]=s.exports},"38c5":function(t,e,n){"use strict";n("47aa")},"3a7b":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("AppPopupWrapper",{attrs:{hidden:t.hidden}},[n("AppTopPanel",{attrs:{header:t.header},scopedSlots:t._u([{key:"nav-buttons",fn:function(){return[n("AppButtonIcon",{attrs:{icon:"add",title:"Добавить"},on:{"button-click":function(e){return t.$emit("popup-add")}}}),n("AppButtonIcon",{attrs:{icon:"close",title:"Закрыть"},on:{"button-click":function(e){return t.$emit("popup-close")}}})]},proxy:!0}])}),n("div",{staticClass:"popup-add-wrapper"},[t._t("popup-add-content")],2)],1)},o=[],p=n("a26a"),i=n("34b0"),r=n("373c"),s={name:"PopupAddWrapper",components:{AppPopupWrapper:p["a"],AppTopPanel:i["a"],AppButtonIcon:r["a"]},props:{hidden:Boolean,header:String}},l=s,c=n("2877"),u=Object(c["a"])(l,a,o,!1,null,null,null);e["a"]=u.exports},"47aa":function(t,e,n){},"73a7":function(t,e,n){"use strict";n("94ec")},"8b19":function(t,e,n){"use strict";n("aa59")},"94ec":function(t,e,n){},"99af":function(t,e,n){"use strict";var a=n("23e7"),o=n("d039"),p=n("e8b5"),i=n("861d"),r=n("7b0b"),s=n("50c4"),l=n("8418"),c=n("65f0"),u=n("1dde"),d=n("b622"),m=n("2d00"),f=d("isConcatSpreadable"),h=9007199254740991,v="Maximum allowed index exceeded",b=m>=51||!o((function(){var t=[];return t[f]=!1,t.concat()[0]!==t})),_=u("concat"),y=function(t){if(!i(t))return!1;var e=t[f];return void 0!==e?!!e:p(t)},E=!b||!_;a({target:"Array",proto:!0,forced:E},{concat:function(t){var e,n,a,o,p,i=r(this),u=c(i,0),d=0;for(e=-1,a=arguments.length;e<a;e++)if(p=-1===e?i:arguments[e],y(p)){if(o=s(p.length),d+o>h)throw TypeError(v);for(n=0;n<o;n++,d++)n in p&&l(u,d,p[n])}else{if(d>=h)throw TypeError(v);l(u,d++,p)}return u.length=d,u}})},a26a:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.hidden?"hidden":"",attrs:{id:"app-popup-wrapper"}},[n("div",{staticClass:"popup-wrapper-overlay"},[n("div",{staticClass:"popup-wrapper-content"},[t._t("default")],2)])])},o=[],p={name:"PopupWrapper",props:{hidden:Boolean}},i=p,r=(n("73a7"),n("2877")),s=Object(r["a"])(i,a,o,!1,null,"70be0339",null);e["a"]=s.exports},aa59:function(t,e,n){},b0c0:function(t,e,n){var a=n("83ab"),o=n("9bf2").f,p=Function.prototype,i=p.toString,r=/^\s*function ([^ (]*)/,s="name";a&&!(s in p)&&o(p,s,{configurable:!0,get:function(){try{return i.call(this).match(r)[1]}catch(t){return""}}})},b445:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app-employees"}},[n("EmployeePopupAdd",{attrs:{"popup-hidden":t.popupAddHidden,employees:t.employees},on:{popupToggle:t.popupAddToggle,addEmployee:t.addEmployee}}),n("AppTopPanel",{attrs:{header:"Список сотрудников"},scopedSlots:t._u([{key:"nav-buttons",fn:function(){return[n("AppButtonIcon",{attrs:{icon:"autorenew",title:"Обновить города"},on:{"button-click":t.updateEmployees}}),n("AppButtonIcon",{attrs:{icon:"add",title:"Добавить города"},on:{"button-click":t.popupAddToggle}})]},proxy:!0}])}),n("div",[t.employees?n("TableEmployees",{attrs:{employees:t.employees},on:{"remove-employee":t.removeEmployee}}):t._e()],1)],1)},o=[],p=n("1da1"),i=n("5530"),r=(n("96cf"),n("2f62")),s=n("260b"),l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("PopupDeleteWrapper",{attrs:{hidePopupStatus:t.popupRemoveHidden,header:"Удаление сотрудника"},on:{"close-popup":t.popupRemoveToggle,"delete-element":function(e){return t.removeEmployee(t.employee.id)}},scopedSlots:t._u([{key:"popup-delete-content",fn:function(){return[t._v(' После нажатия кнопки "да" будет удалён сотрудник! ')]},proxy:!0}])}),n("table",[t._m(0),t._l(t.employees,(function(e){return n("tr",{key:e.value},[n("td",[n("div",{staticClass:"parent-clip-text"},[n("p",{staticClass:"clip-text",attrs:{title:e.surname}},[t._v(t._s(e.surname))])])]),n("td",[n("div",{staticClass:"parent-clip-text"},[n("p",{staticClass:"clip-text",attrs:{title:e.name}},[t._v(t._s(e.name))])])]),n("td",[n("div",{staticClass:"parent-clip-text"},[n("a",{staticClass:"clip-text",attrs:{href:"mailto:"+e.email,title:"Написать на почту: "+e.email}},[t._v(t._s(e.email))])])]),n("td",[n("a",{attrs:{href:"tel:"+e.number,title:"Позвонить"}},[t._v(t._s(e.mobilePhone))])]),n("td",[n("div",{staticClass:"parent-clip-text"},[n("p",{staticClass:"clip-text",attrs:{title:e.city}},[t._v(t._s(e.city))])])]),n("td",[n("div",{staticClass:"parent-clip-text"},[n("p",{staticClass:"clip-text",attrs:{title:e.duty}},[t._v(t._s(e.duty))])])]),n("td",[n("div",{staticClass:"flex-center btns-collection"},[n("router-link",{staticClass:"btn-transparent transparent waves-effect waves-light auth-submit blue-text text-darken-1",attrs:{title:"История редактирования",to:{name:"employeeHistory",params:{id:e.id}}}},[n("i",{staticClass:"material-icons"},[t._v("description")])]),n("router-link",{staticClass:"btn-transparent transparent waves-effect waves-light auth-submit blue-text text-darken-1",attrs:{title:"Редактировать",to:{name:"employeeEdit",params:{id:e.id}}}},[n("i",{staticClass:"material-icons"},[t._v("create")])]),n("button",{staticClass:"btn-transparent transparent waves-effect waves-light auth-submit blue-text text-darken-1",attrs:{title:"Удалить"},on:{click:function(n){t.popupRemoveToggle(),t.setEmployee(e)}}},[n("i",{staticClass:"material-icons"},[t._v("delete")])])],1)])])}))],2)],1)},c=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tr",[n("th",[t._v("Фамилия")]),n("th",[t._v("Имя")]),n("th",[t._v("Почта")]),n("th",[t._v("Номер")]),n("th",[t._v("Город")]),n("th",[t._v("Должность")])])}],u=n("3368"),d={name:"TableEmployees",components:{PopupDeleteWrapper:u["a"]},props:{employees:Object},data:function(){return{employee:"",popupRemoveHidden:!0}},methods:{popupRemoveToggle:function(){this.popupRemoveHidden=!this.popupRemoveHidden},setEmployee:function(t){this.employee=t},removeEmployee:function(t){this.popupRemoveToggle(),this.$emit("remove-employee",t)}}},m=d,f=n("2877"),h=Object(f["a"])(m,l,c,!1,null,null,null),v=h.exports,b=n("34b0"),_=n("373c"),y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("PopupAddWrapper",{attrs:{hidden:t.popupHidden,header:"Добавление сотрудника"},on:{"popup-close":function(e){return t.$emit("popupToggle")},"popup-add":function(e){return t.createEmployee()}},scopedSlots:t._u([{key:"popup-add-content",fn:function(){return[n("AppLineText",{attrs:{inputID:"input-email",label:"Почта: ",maxLength:"20"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})]},proxy:!0}])})},E=[],g=(n("99af"),n("b0c0"),n("3a7b")),x=n("1b06"),A={name:"EmployeePopupAdd",components:{PopupAddWrapper:g["a"],AppLineText:x["a"]},props:{popupHidden:Boolean,employees:Object},data:function(){return{email:""}},computed:Object(i["a"])({},Object(r["c"])(["authEmployee"])),methods:{getPassword:function(){for(var t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!№;%:?*()@_+=",n=0;n<10;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return t},createEmployee:function(){var t={id:Date.now(),email:this.email,password:this.getPassword(),name:"Сотрудник",surname:"Новый",patronymic:"",sex:"Мужской",homePhone:"",mobilePhone:"",city:this.authEmployee.city,duty:"Сотрудник",access:"employee",settings:{autoUpdate:5e3},history:[{date:"[Дата: ".concat((new Date).toLocaleDateString()," Время: ").concat((new Date).toLocaleTimeString(),"]"),info:"Сотрудник создан сотрудником ",employee:{name:"".concat(this.authEmployee.surname," ").concat(this.authEmployee.name),id:this.authEmployee.id}}]};this.$emit("addEmployee",t),this.email=""}}},S=A,O=Object(f["a"])(S,y,E,!1,null,null,null),P=O.exports,C={name:"Employees",components:{TableEmployees:v,AppTopPanel:b["a"],AppButtonIcon:_["a"],EmployeePopupAdd:P},computed:Object(i["a"])({},Object(r["c"])(["employees"])),data:function(){return{popupAddHidden:!0}},created:function(){this.SET_EMPLOYEES_FROM_LOCAL_STORAGE()},methods:Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(r["d"])(["SET_EMPLOYEES_FROM_LOCAL_STORAGE","SET_EMPLOYEES_FROM_SERVER"])),Object(r["b"])(["registerEmployees"])),{},{popupAddToggle:function(){this.popupAddHidden=!this.popupAddHidden},removeEmployee:function(t){var e=this;s["a"].database().ref("/employees/"+t).remove().then((function(){e.SET_EMPLOYEES_FROM_SERVER(),console.log("Сотрудник удалён 🗑️")}))},addEmployee:function(t){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.popupAddToggle(),a={email:t.email,password:t.password},n.next=4,e.registerEmployees(a);case 4:t.id=n.sent,s["a"].database().ref("/employees/"+t.id).set(t).then((function(){e.SET_EMPLOYEES_FROM_SERVER(),console.log("Сотрудник добавлен ➕")}));case 6:case"end":return n.stop()}}),n)})))()},updateEmployees:function(){this.SET_EMPLOYEES_FROM_SERVER(),M.toast({html:"Сотрудники обновлены"})}})},T=C,w=Object(f["a"])(T,a,o,!1,null,null,null);e["default"]=w.exports},be66:function(t,e,n){"use strict";n("ffb5")},f2cc:function(t,e,n){},f8a1:function(t,e,n){"use strict";n("f2cc")},ffb5:function(t,e,n){}}]);
//# sourceMappingURL=chunk-079daf20.e1843759.js.map