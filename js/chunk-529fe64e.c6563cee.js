(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-529fe64e"],{"159b":function(t,e,i){var s=i("da84"),n=i("fdbc"),r=i("17c2"),a=i("9112");for(var c in n){var o=s[c],l=o&&o.prototype;if(l&&l.forEach!==r)try{a(l,"forEach",r)}catch(u){l.forEach=r}}},"17c2":function(t,e,i){"use strict";var s=i("b727").forEach,n=i("a640"),r=i("ae40"),a=n("forEach"),c=r("forEach");t.exports=a&&c?[].forEach:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}},"1dde":function(t,e,i){var s=i("d039"),n=i("b622"),r=i("2d00"),a=n("species");t.exports=function(t){return r>=51||!s((function(){var e=[],i=e.constructor={};return i[a]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"35b5":function(t,e,i){},4160:function(t,e,i){"use strict";var s=i("23e7"),n=i("17c2");s({target:"Array",proto:!0,forced:[].forEach!=n},{forEach:n})},"498a2":function(t,e,i){"use strict";var s=i("23e7"),n=i("58a8").trim,r=i("c8d2");s({target:"String",proto:!0,forced:r("trim")},{trim:function(){return n(this)}})},"4de4":function(t,e,i){"use strict";var s=i("23e7"),n=i("b727").filter,r=i("1dde"),a=i("ae40"),c=r("filter"),o=a("filter");s({target:"Array",proto:!0,forced:!c||!o},{filter:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},"504e":function(t,e,i){"use strict";i("7857")},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,i){var s=i("1d80"),n=i("5899"),r="["+n+"]",a=RegExp("^"+r+r+"*"),c=RegExp(r+r+"*$"),o=function(t){return function(e){var i=String(s(e));return 1&t&&(i=i.replace(a,"")),2&t&&(i=i.replace(c,"")),i}};t.exports={start:o(1),end:o(2),trim:o(3)}},"65f0":function(t,e,i){var s=i("861d"),n=i("e8b5"),r=i("b622"),a=r("species");t.exports=function(t,e){var i;return n(t)&&(i=t.constructor,"function"!=typeof i||i!==Array&&!n(i.prototype)?s(i)&&(i=i[a],null===i&&(i=void 0)):i=void 0),new(void 0===i?Array:i)(0===e?0:e)}},7156:function(t,e,i){var s=i("861d"),n=i("d2bb");t.exports=function(t,e,i){var r,a;return n&&"function"==typeof(r=e.constructor)&&r!==i&&s(a=r.prototype)&&a!==i.prototype&&n(t,a),t}},7857:function(t,e,i){},"800e":function(t,e,i){},"987c":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container-page"},[i("div",{staticClass:"page-title flex-between-center"},[i("div",{staticClass:"flex-center"},[i("h3",[t._v("Список городов")]),i("div",{staticClass:"flex-center"},[i("button",{staticClass:"btn-floating btn-page-title blue darken-1 waves-effect waves-circle waves-light",attrs:{onclick:"M.toast({html: 'Города обновлены'})"},on:{click:function(e){return t.updateCollection("sites")}}},[i("i",{staticClass:"material-icons"},[t._v("autorenew")])])])]),i("AddCardSites",{on:{"add-city":t.addCity}})],1),i("div",[t.sites.length?i("ListSites",{attrs:{sites:t.sites},on:{"remove-city":t.removeCity}}):i("div",{staticClass:"empty-list"},[i("h5",{staticClass:"empty-list-title"},[i("i",{staticClass:"material-icons"},[t._v("mood_bad")]),t._v(" Городов не осталось!")]),i("p",[t._v("Добавьте город, чтобы начать работать над ним.")])])],1)])},n=[],r=(i("4de4"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("form",{staticClass:"flex-center",on:{submit:function(e){return e.preventDefault(),t.submitSites(e)}}},[i("div",{staticClass:"input-field input-field-blue input-field-add"},[i("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.cityName,expression:"cityName",modifiers:{trim:!0}}],staticClass:"input-add",class:{invalid:t.$v.cityName.$dirty&&!t.$v.cityName.required||t.$v.cityName.$dirty&&!t.$v.cityName.minLength},attrs:{type:"text",id:"city"},domProps:{value:t.cityName},on:{input:function(e){e.target.composing||(t.cityName=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),i("label",{attrs:{for:"city"}},[t._v("Город")]),t.$v.cityName.$dirty&&!t.$v.cityName.required?i("small",{staticClass:"helper-text invalid"},[t._v(" Введите город ")]):t.$v.cityName.$dirty&&!t.$v.cityName.minLength?i("small",{staticClass:"helper-text invalid"},[t._v(" Город должен содержать не менее "+t._s(t.$v.cityName.$params.minLength.min)+" символов ")]):t.coincidence?i("small",{staticClass:"helper-text invalid"},[t._v(" Город уже есть ")]):t._e()]),t._m(0)])}),a=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("button",{staticClass:"btn-floating btn-page-title blue darken-1 waves-effect waves-circle waves-light",attrs:{title:"Добавить город",type:"submit"}},[i("i",{staticClass:"material-icons"},[t._v("add")])])}],c=(i("d3b7"),i("25f0"),i("498a2"),i("b85c")),o=i("b5ae"),l={name:"AddCardSites",data:function(){return{cityName:"",coincidence:!1,sites:[{}]}},validations:{cityName:{required:o["required"],minLength:Object(o["minLength"])(2)}},methods:{submitSites:function(){if(localStorage.getItem("sites"))try{this.sites=JSON.parse(localStorage.getItem("sites"))}catch(n){localStorage.removeItem("sites")}if(this.$v.$invalid)this.$v.$touch();else{var t,e=Object(c["a"])(this.sites);try{for(e.s();!(t=e.n()).done;){var i=t.value;if(void 0!==i.cityName){if(i.cityName.toString().toLowerCase()===this.cityName.toString().toLowerCase()){this.coincidence=!0;break}this.coincidence=!1}}}catch(r){e.e(r)}finally{e.f()}if(this.cityName.trim()&&!this.coincidence){this.cityName=this.cityName[0].toUpperCase()+this.cityName.substring(1);var s={id:Date.now(),cityName:this.cityName,employees:0,edited:!1};this.$emit("add-city",s),this.cityName=""}}}}},u=l,f=(i("dd43"),i("2877")),d=Object(f["a"])(u,r,a,!1,null,"a6eabb2e",null),p=d.exports,m=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",t._l(t.sites,(function(e){return i("CardSites",{key:e.id,attrs:{city:e},on:{"remove-city":t.removeCity}})})),1)},v=[],h=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"row"},[t.popupShow?i("Popup",{attrs:{"popup-toast":"Город "+t.city.cityName+" был удалён!"},on:{yes:function(e){return t.$emit("remove-city",t.city.id)},no:t.popupHidden},scopedSlots:t._u([{key:"title-popup",fn:function(){return[t._v(" Удалить? ")]},proxy:!0},{key:"text-info-popup",fn:function(){return[t._v(' После нажатия кнопки "да" будет удалён город '),i("b",[t._v(t._s(t.city.cityName))])]},proxy:!0}],null,!1,2469235169)}):t._e(),i("div",{staticClass:"col s12"},[i("div",{staticClass:"card-panel blue darken-1 white-text"},[i("div",{staticClass:"card-content dark-text card-line"},[i("div",{staticClass:"info-container"},[i("h6",[i("i",{staticClass:"material-icons"},[t._v("location_city")]),t._v(" Город: "+t._s(t.city.cityName))]),i("h6",[i("i",{staticClass:"material-icons"},[t._v("group")]),t._v(" Количество сотрудников: "+t._s(t.city.employees))]),t.city.edited?i("p",{staticClass:"card-report"},[i("i",{staticClass:"material-icons"},[t._v("report")]),t._v(" Карточка сейчас редактируется другим сотрудником ")]):t._e()]),i("div",{staticClass:"flex-center flex-centerflex-column-center"},[i("button",{staticClass:"btn-floating transparent darken-2 waves-effect waves-light auth-submit white-text",attrs:{title:"Редактировать"},on:{click:t.editedCityStatus}},[i("i",{staticClass:"material-icons"},[t._v("create")])]),t.city.edited?t._e():i("button",{staticClass:"btn-floating transparent darken-2 waves-effect waves-light auth-submit white-text",attrs:{title:"Удалить"},on:{click:t.popupVisibility}},[i("i",{staticClass:"material-icons"},[t._v("delete")])])])])])])],1)},y=[],g=(i("c740"),i("4160"),i("a9e3"),i("159b"),i("3905")),S={name:"CardSites",components:{Popup:g["a"]},props:{city:{type:Object},index:Number},data:function(){return{sites:[],employees:[],popupShow:!1,countEmployees:0}},methods:{popupVisibility:function(){this.popupShow=!0},popupHidden:function(){this.popupShow=!1},editedCityStatus:function(){var t=this;if(localStorage.getItem("sites"))try{this.sites=JSON.parse(localStorage.getItem("sites"))}catch(i){localStorage.removeItem("sites")}var e=this.sites.findIndex((function(e){return e.id===t.city.id}));this.sites[e].edited=!0,this.saveSites(),this.$router.push("/sites/editor")},amountEmployees:function(){var t=this;try{var e=this.sites.findIndex((function(e){return e.id===t.city.id}));this.employees.forEach((function(i){i.city===t.sites[e].cityName&&t.countEmployees++})),this.sites[e].employees=this.countEmployees}catch(i){}this.saveSites()},saveSites:function(){var t=JSON.stringify(this.sites);localStorage.setItem("sites",t)}},mounted:function(){if(localStorage.getItem("sites"))try{this.sites=JSON.parse(localStorage.getItem("sites"))}catch(t){localStorage.removeItem("sites")}if(localStorage.getItem("employees"))try{this.employees=JSON.parse(localStorage.getItem("employees"))}catch(t){localStorage.removeItem("employees")}this.amountEmployees()}},b=S,C=(i("9e9c"),Object(f["a"])(b,h,y,!1,null,"87c8fc26",null)),N=C.exports,_={name:"ListSites",components:{CardSites:N},methods:{removeCity:function(t){this.$emit("remove-city",t)}},props:["sites"]},x=_,I=(i("504e"),Object(f["a"])(x,m,v,!1,null,"24e285e9",null)),L=I.exports,E={name:"Sites",components:{ListSites:L,AddCardSites:p},data:function(){return{sites:[{}],updateTimeout:6e4}},methods:{removeCity:function(t){this.sites=this.sites.filter((function(e){return e.id!==t})),this.saveCollection(this.sites,"sites")},addCity:function(t){this.sites.push(t),this.saveCollection(this.sites,"sites")},saveCollection:function(t,e){var i=JSON.stringify(t);localStorage.setItem(e,i)},updateCollection:function(t){if(localStorage.getItem(t))try{this.sites=JSON.parse(localStorage.getItem(t))}catch(e){localStorage.removeItem(t)}}},mounted:function(){var t=this;this.updateCollection("sites"),setInterval((function(){return t.updateCollection("sites")}),this.updateTimeout)}},w=E,$=Object(f["a"])(w,s,n,!1,null,null,null);e["default"]=$.exports},"9e9c":function(t,e,i){"use strict";i("35b5")},a640:function(t,e,i){"use strict";var s=i("d039");t.exports=function(t,e){var i=[][t];return!!i&&s((function(){i.call(null,e||function(){throw 1},1)}))}},a9e3:function(t,e,i){"use strict";var s=i("83ab"),n=i("da84"),r=i("94ca"),a=i("6eeb"),c=i("5135"),o=i("c6b6"),l=i("7156"),u=i("c04e"),f=i("d039"),d=i("7c73"),p=i("241c").f,m=i("06cf").f,v=i("9bf2").f,h=i("58a8").trim,y="Number",g=n[y],S=g.prototype,b=o(d(S))==y,C=function(t){var e,i,s,n,r,a,c,o,l=u(t,!1);if("string"==typeof l&&l.length>2)if(l=h(l),e=l.charCodeAt(0),43===e||45===e){if(i=l.charCodeAt(2),88===i||120===i)return NaN}else if(48===e){switch(l.charCodeAt(1)){case 66:case 98:s=2,n=49;break;case 79:case 111:s=8,n=55;break;default:return+l}for(r=l.slice(2),a=r.length,c=0;c<a;c++)if(o=r.charCodeAt(c),o<48||o>n)return NaN;return parseInt(r,s)}return+l};if(r(y,!g(" 0o1")||!g("0b1")||g("+0x1"))){for(var N,_=function(t){var e=arguments.length<1?0:t,i=this;return i instanceof _&&(b?f((function(){S.valueOf.call(i)})):o(i)!=y)?l(new g(C(e)),i,_):C(e)},x=s?p(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),I=0;x.length>I;I++)c(g,N=x[I])&&!c(_,N)&&v(_,N,m(g,N));_.prototype=S,S.constructor=_,a(n,y,_)}},ae40:function(t,e,i){var s=i("83ab"),n=i("d039"),r=i("5135"),a=Object.defineProperty,c={},o=function(t){throw t};t.exports=function(t,e){if(r(c,t))return c[t];e||(e={});var i=[][t],l=!!r(e,"ACCESSORS")&&e.ACCESSORS,u=r(e,0)?e[0]:o,f=r(e,1)?e[1]:void 0;return c[t]=!!i&&!n((function(){if(l&&!s)return!0;var t={length:-1};l?a(t,1,{enumerable:!0,get:o}):t[1]=1,i.call(t,u,f)}))}},b727:function(t,e,i){var s=i("0366"),n=i("44ad"),r=i("7b0b"),a=i("50c4"),c=i("65f0"),o=[].push,l=function(t){var e=1==t,i=2==t,l=3==t,u=4==t,f=6==t,d=5==t||f;return function(p,m,v,h){for(var y,g,S=r(p),b=n(S),C=s(m,v,3),N=a(b.length),_=0,x=h||c,I=e?x(p,N):i?x(p,0):void 0;N>_;_++)if((d||_ in b)&&(y=b[_],g=C(y,_,S),t))if(e)I[_]=g;else if(g)switch(t){case 3:return!0;case 5:return y;case 6:return _;case 2:o.call(I,y)}else if(u)return!1;return f?-1:l||u?u:I}};t.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6)}},c740:function(t,e,i){"use strict";var s=i("23e7"),n=i("b727").findIndex,r=i("44d2"),a=i("ae40"),c="findIndex",o=!0,l=a(c);c in[]&&Array(1)[c]((function(){o=!1})),s({target:"Array",proto:!0,forced:o||!l},{findIndex:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),r(c)},c8d2:function(t,e,i){var s=i("d039"),n=i("5899"),r="​᠎";t.exports=function(t){return s((function(){return!!n[t]()||r[t]()!=r||n[t].name!==t}))}},dd43:function(t,e,i){"use strict";i("800e")},e8b5:function(t,e,i){var s=i("c6b6");t.exports=Array.isArray||function(t){return"Array"==s(t)}},fdbc:function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=chunk-529fe64e.c6563cee.js.map