(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d221f1c"],{cd05:function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app-edit"}},[i("AppEditWrapper",{attrs:{header:"Редактор рабочего: "+e.editedWorker.surname+" "+e.editedWorker.name},scopedSlots:e._u([{key:"nav-buttons",fn:function(){return[i("AppButtonIcon",{attrs:{icon:"save",title:"Сохранить и выйти"},on:{"button-click":function(t){return e.saveEditedWorker(e.editedWorker)}}}),i("AppButtonIcon",{attrs:{icon:"location_city",title:"Вернуться к рабочим"},on:{"button-click":e.editorExit}})]},proxy:!0},{key:"edit-section",fn:function(){return[i("div",{staticClass:"edit-block"},[i("AppHeaderIcon",{staticClass:"edit-block-header",attrs:{"header-level":"4","material-icon":"account_box","header-text":"ФИО"}}),i("div",{staticClass:"edit-block-content"},[i("AppLineText",{attrs:{inputID:"input-surname",label:"Фамилия: ",maxLength:"20"},model:{value:e.editedWorker.surname,callback:function(t){e.$set(e.editedWorker,"surname",t)},expression:"editedWorker.surname"}}),i("AppLineText",{attrs:{inputID:"input-name",label:"Имя: ",maxLength:"20"},model:{value:e.editedWorker.name,callback:function(t){e.$set(e.editedWorker,"name",t)},expression:"editedWorker.name"}}),i("AppLineText",{attrs:{inputID:"input-patronymic",label:"Отчество: ",maxLength:"20"},model:{value:e.editedWorker.patronymic,callback:function(t){e.$set(e.editedWorker,"patronymic",t)},expression:"editedWorker.patronymic"}})],1)],1),i("div",{staticClass:"edit-block"},[i("AppHeaderIcon",{staticClass:"edit-block-header",attrs:{"header-level":"4","material-icon":"account_box","header-text":"Паспортные данные"}}),i("div",{staticClass:"edit-block-content"},[i("AppLineText",{attrs:{inputID:"input-passport-id",label:"Номер паспорта: ",maxLength:"20"},model:{value:e.editedWorker.passportID,callback:function(t){e.$set(e.editedWorker,"passportID",t)},expression:"editedWorker.passportID"}}),i("AppLineText",{attrs:{inputID:"input-passport-date",label:"Дата выдачи: ",maxLength:"20"},model:{value:e.editedWorker.passportDate,callback:function(t){e.$set(e.editedWorker,"passportDate",t)},expression:"editedWorker.passportDate"}}),i("AppLineText",{attrs:{inputID:"input-passport-issued",label:"Кем выдан: ",maxLength:"20"},model:{value:e.editedWorker.passportIssued,callback:function(t){e.$set(e.editedWorker,"passportIssued",t)},expression:"editedWorker.passportIssued"}}),i("AppLineText",{attrs:{inputID:"input-passport-address",label:"Адрес: ",maxLength:"20"},model:{value:e.editedWorker.address,callback:function(t){e.$set(e.editedWorker,"address",t)},expression:"editedWorker.address"}})],1)],1),i("div",{staticClass:"edit-block"},[i("AppHeaderIcon",{staticClass:"edit-block-header",attrs:{"header-level":"4","material-icon":"account_box","header-text":"Личные данные"}}),i("div",{staticClass:"edit-block-content"},[i("AppLineText",{attrs:{inputID:"input-birthday",label:"День рождения: ",maxLength:"20"},model:{value:e.editedWorker.birthday,callback:function(t){e.$set(e.editedWorker,"birthday",t)},expression:"editedWorker.birthday"}}),i("AppSelect",{attrs:{selectID:"select-bank",label:"Пол: "},model:{value:e.editedWorker.sex,callback:function(t){e.$set(e.editedWorker,"sex",t)},expression:"editedWorker.sex"}},[i("option",{staticClass:"editor-option",attrs:{value:"Мужской"}},[e._v("Мужской")]),i("option",{staticClass:"editor-option",attrs:{value:"Женский"}},[e._v("Женский")])]),i("AppLineText",{attrs:{inputID:"input-nationality",label:"Национальность: ",maxLength:"20"},model:{value:e.editedWorker.nationality,callback:function(t){e.$set(e.editedWorker,"nationality",t)},expression:"editedWorker.nationality"}}),i("AppLineText",{attrs:{inputID:"input-medical-book",label:"Мед.книжка: ",maxLength:"20"},model:{value:e.editedWorker.medicalBook,callback:function(t){e.$set(e.editedWorker,"medicalBook",t)},expression:"editedWorker.medicalBook"}}),i("AppLineText",{attrs:{inputID:"input-education",label:"Образование: ",maxLength:"20"},model:{value:e.editedWorker.education,callback:function(t){e.$set(e.editedWorker,"education",t)},expression:"editedWorker.education"}}),i("AppLineText",{attrs:{inputID:"input-university",label:"ВУЗ: ",maxLength:"20"},model:{value:e.editedWorker.university,callback:function(t){e.$set(e.editedWorker,"university",t)},expression:"editedWorker.university"}})],1)],1),i("div",{staticClass:"edit-block"},[i("AppHeaderIcon",{staticClass:"edit-block-header",attrs:{"header-level":"4","material-icon":"account_box","header-text":"Банковские данные"}}),i("div",{staticClass:"edit-block-content"},[i("AppLineText",{attrs:{inputID:"input-surname-card",label:"Фамилия владельца: ",maxLength:"20"},model:{value:e.editedWorker.surnameCard,callback:function(t){e.$set(e.editedWorker,"surnameCard",t)},expression:"editedWorker.surnameCard"}}),i("AppLineText",{attrs:{inputID:"input-name-card",label:"Имя владельца: ",maxLength:"20"},model:{value:e.editedWorker.nameCard,callback:function(t){e.$set(e.editedWorker,"nameCard",t)},expression:"editedWorker.nameCard"}}),i("AppLineText",{attrs:{inputID:"input-patronymic-card",label:"Отчество владельца: ",maxLength:"20"},model:{value:e.editedWorker.patronymicCard,callback:function(t){e.$set(e.editedWorker,"patronymicCard",t)},expression:"editedWorker.patronymicCard"}}),i("AppLineText",{attrs:{inputID:"input-account-card-number",label:"Номер счёта: ",maxLength:"20"},model:{value:e.editedWorker.accountNumber,callback:function(t){e.$set(e.editedWorker,"accountNumber",t)},expression:"editedWorker.accountNumber"}}),i("AppSelect",{attrs:{selectID:"select-bank",label:"Банк: "},model:{value:e.editedWorker.bank,callback:function(t){e.$set(e.editedWorker,"bank",t)},expression:"editedWorker.bank"}},[i("option",{staticClass:"editor-option",attrs:{value:"СберБанк"}},[e._v("СберБанк")]),i("option",{staticClass:"editor-option",attrs:{value:"Банк ВТБ"}},[e._v("Банк ВТБ")]),i("option",{staticClass:"editor-option",attrs:{value:"Газпромбанк"}},[e._v("Газпромбанк")]),i("option",{staticClass:"editor-option",attrs:{value:"Национальный Клиринговый Центр"}},[e._v("Национальный Клиринговый Центр")]),i("option",{staticClass:"editor-option",attrs:{value:"Альфа-Банк"}},[e._v("Альфа-Банк")]),i("option",{staticClass:"editor-option",attrs:{value:"Россельхозбанк"}},[e._v("Россельхозбанк")]),i("option",{staticClass:"editor-option",attrs:{value:"Московский Кредитный Банк"}},[e._v("Московский Кредитный Банк")]),i("option",{staticClass:"editor-option",attrs:{value:"Банк «Открытие»"}},[e._v("Банк «Открытие»")]),i("option",{staticClass:"editor-option",attrs:{value:"Совкомбанк"}},[e._v("Совкомбанк")]),i("option",{staticClass:"editor-option",attrs:{value:"Росбанк"}},[e._v("Росбанк")]),i("option",{staticClass:"editor-option",attrs:{value:"Тинькофф Банк"}},[e._v("Тинькофф Банк")])])],1)],1),i("div",{staticClass:"edit-block"},[i("AppHeaderIcon",{staticClass:"edit-block-header",attrs:{"header-level":"4","material-icon":"account_box","header-text":"Контактные данные"}}),i("div",{staticClass:"edit-block-content"},[i("AppLineText",{attrs:{inputID:"input-city",label:"Город: ",maxLength:"20"},model:{value:e.editedWorker.city,callback:function(t){e.$set(e.editedWorker,"city",t)},expression:"editedWorker.city"}}),i("AppLineText",{attrs:{inputID:"input-home-phone",label:"Домашний телефон: ",maxLength:"20"},model:{value:e.editedWorker.homePhone,callback:function(t){e.$set(e.editedWorker,"homePhone",t)},expression:"editedWorker.homePhone"}}),i("AppLineText",{attrs:{inputID:"input-mobile-phone",label:"Основ. моб. телефон: ",maxLength:"20"},model:{value:e.editedWorker.mobilePhone,callback:function(t){e.$set(e.editedWorker,"mobilePhone",t)},expression:"editedWorker.mobilePhone"}}),i("AppLineText",{attrs:{inputID:"input-mobile-phone-additional",label:"Доб. моб. телефон: ",maxLength:"20"},model:{value:e.editedWorker.mobilePhoneAdditional,callback:function(t){e.$set(e.editedWorker,"mobilePhoneAdditional",t)},expression:"editedWorker.mobilePhoneAdditional"}}),i("AppLineText",{attrs:{inputID:"input-mobile-phone-standby",label:"Запас. моб. телефон: ",maxLength:"20"},model:{value:e.editedWorker.mobilePhoneStandby,callback:function(t){e.$set(e.editedWorker,"mobilePhoneStandby",t)},expression:"editedWorker.mobilePhoneStandby"}})],1)],1),i("div",{staticClass:"edit-block"},[i("AppHeaderIcon",{staticClass:"edit-block-header",attrs:{"header-level":"4","material-icon":"account_box","header-text":"Рабочие данные"}}),i("div",{staticClass:"edit-block-content"},[i("AppLineText",{attrs:{inputID:"input-account-number",label:"Учёт. номер: ",maxLength:"20"},model:{value:e.editedWorker.accountNumber,callback:function(t){e.$set(e.editedWorker,"accountNumber",t)},expression:"editedWorker.accountNumber"}}),i("AppLineText",{attrs:{inputID:"input-previous-work",label:"Прежняя работа: ",maxLength:"20"},model:{value:e.editedWorker.previousWork,callback:function(t){e.$set(e.editedWorker,"previousWork",t)},expression:"editedWorker.previousWork"}}),i("AppLineText",{attrs:{inputID:"input-reason-coming",label:"Почему пришёл к нам: ",maxLength:"20"},model:{value:e.editedWorker.reasonComing,callback:function(t){e.$set(e.editedWorker,"reasonComing",t)},expression:"editedWorker.reasonComing"}}),i("AppLineText",{attrs:{inputID:"input-profession",label:"Профессия 1: ",maxLength:"20"},model:{value:e.editedWorker.professions,callback:function(t){e.$set(e.editedWorker,"professions",t)},expression:"editedWorker.professions"}}),i("AppLineText",{attrs:{inputID:"input-profession-second",label:"Профессия 2: ",maxLength:"20"},model:{value:e.editedWorker.professionsSecond,callback:function(t){e.$set(e.editedWorker,"professionsSecond",t)},expression:"editedWorker.professionsSecond"}}),i("AppLineText",{attrs:{inputID:"input-profession-third",label:"Профессия 3: ",maxLength:"20"},model:{value:e.editedWorker.professionsThird,callback:function(t){e.$set(e.editedWorker,"professionsThird",t)},expression:"editedWorker.professionsThird"}}),i("AppLineText",{attrs:{inputID:"input-night-shift",label:"Ночная смена: ",maxLength:"20"},model:{value:e.editedWorker.nightShift,callback:function(t){e.$set(e.editedWorker,"nightShift",t)},expression:"editedWorker.nightShift"}}),i("AppLineText",{attrs:{inputID:"input-check-mvd",label:"Проверка МВД: ",maxLength:"20"},model:{value:e.editedWorker.checkMVD,callback:function(t){e.$set(e.editedWorker,"checkMVD",t)},expression:"editedWorker.checkMVD"}}),i("AppLineText",{attrs:{inputID:"input-date-interview",label:"Дата собеседования: ",maxLength:"20"},model:{value:e.editedWorker.dateInterview,callback:function(t){e.$set(e.editedWorker,"dateInterview",t)},expression:"editedWorker.dateInterview"}}),i("AppLineText",{attrs:{inputID:"input-date-uniform",label:"Униформа: ",maxLength:"20"},model:{value:e.editedWorker.uniform,callback:function(t){e.$set(e.editedWorker,"uniform",t)},expression:"editedWorker.uniform"}}),i("AppLineText",{attrs:{inputID:"input-fired",label:"Уволен ли: ",maxLength:"20"},model:{value:e.editedWorker.fired,callback:function(t){e.$set(e.editedWorker,"fired",t)},expression:"editedWorker.fired"}})],1)],1)]},proxy:!0}])})],1)},a=[],r=i("2909"),n=i("5530"),d=(i("159b"),i("99af"),i("b0c0"),i("4d5c")),s=i.n(d),l=i("2f62"),c=i("260b"),p=i("2721"),u=i("373c"),k=i("1b06"),m=i("38a1"),b=i("fac1"),h={name:"EditorWorkers",components:{AppEditWrapper:p["a"],AppButtonIcon:u["a"],AppLineText:k["a"],AppHeaderIcon:m["a"],AppSelect:b["a"]},data:function(){return{editedWorker:"",history:[],note:""}},computed:Object(n["a"])({},Object(l["c"])(["workers","sites","employees","authEmployee"])),created:function(){var e=document.querySelectorAll(".select");e.forEach((function(e){s.a.FormSelect.init(e)})),this.SET_EMPLOYEES_FROM_LOCAL_STORAGE(),this.SET_WORKERS_FROM_LOCAL_STORAGE(),this.SET_SITES_FROM_LOCAL_STORAGE(),this.editedWorker=this.workers[this.$route.params.id]},methods:Object(n["a"])(Object(n["a"])({},Object(l["d"])(["SET_WORKERS_FROM_SERVER","SET_WORKERS_FROM_LOCAL_STORAGE","SET_SITES_FROM_SERVER","SET_SITES_FROM_LOCAL_STORAGE","SET_EMPLOYEES_FROM_LOCAL_STORAGE"])),{},{changeData:function(e,t){this.history.push({date:"[Дата: ".concat((new Date).toLocaleDateString()," Время: ").concat((new Date).toLocaleTimeString(),"]"),info:"был изменён ".concat(t,' на "').concat(e,'" сотрудником'),employee:{name:"".concat(this.authEmployee.surname," ").concat(this.authEmployee.name),id:this.authEmployee.id}})},editorExit:function(){this.$router.push("/workers")},saveEditedWorker:function(e){var t=this;this.editedWorker.editedCount+=1,this.note.length&&this.editedWorker.notes.push("".concat((new Date).toLocaleDateString(),": ").concat(this.note));try{var i;this.history.push({date:"[Дата: ".concat((new Date).toLocaleDateString()," Время: ").concat((new Date).toLocaleTimeString(),"]"),info:"Работник сохранён сотрудником",employee:{name:"".concat(this.authEmployee.surname," ").concat(this.authEmployee.name),id:this.authEmployee.id}}),(i=e.history).push.apply(i,Object(r["a"])(this.history))}catch(o){s.a.toast({html:"Внимание! Данный рабочий не поддерживает историю"})}c["a"].database().ref("/workers/"+e.id).set(e).then((function(){t.SET_WORKERS_FROM_SERVER(),t.editorExit()}))},ageCalc:function(){this.editedWorker.age=(new Date).getFullYear()-this.editedWorker.birthday.substr(0,4)},medicalBookCalc:function(){var e=this.editedWorker.medicalBook.substr(0,4)-(new Date).getFullYear();this.editedWorker.medicalBookStatus=e>0?e+" лет":"Просрочена"},upload:function(){var e=this,t=cloudinary.createUploadWidget({cloudName:"db6qzfvbw",uploadPreset:"ml_default",language:"ru"},(function(t,i){!t&&i&&"success"===i.event&&(e.editedWorker.UploadImage=i.info.secure_url)}));t.open()},uploadPassport:function(){var e=this,t=cloudinary.createUploadWidget({cloudName:"db6qzfvbw",uploadPreset:"ml_default",language:"ru"},(function(t,i){!t&&i&&"success"===i.event&&(e.editedWorker.UploadPassport=i.info.secure_url)}));t.open()},uploadNote:function(){var e=this,t=cloudinary.createUploadWidget({cloudName:"db6qzfvbw",uploadPreset:"ml_default",language:"ru"},(function(t,i){!t&&i&&"success"===i.event&&(e.editedWorker.uploadImageNote=i.info.secure_url)}));t.open()}})},W=h,x=i("2877"),v=Object(x["a"])(W,o,a,!1,null,null,null);t["default"]=v.exports}}]);
//# sourceMappingURL=chunk-2d221f1c.ef7690d9.js.map